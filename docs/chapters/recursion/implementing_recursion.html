<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Implementing recursive functions - Introduction to Programming 2</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../css/pyscript.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../chapters/intro.html">Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/review/dudraw_animation.html">Review of animation with dudraw</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapters/functions/functions_chapter.html">Functions (Review + New)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/functions/functions.html">User-defined functions (review)</a></li><li class="chapter-item expanded "><a href="../../chapters/functions/function_arguments.html">Functions that take arguments (review)</a></li><li class="chapter-item expanded "><a href="../../chapters/functions/function_return_values.html">Functions that return a value (review)</a></li><li class="chapter-item expanded "><a href="../../chapters/functions/functions_default_arguments.html">Default values for arguments (new)</a></li><li class="chapter-item expanded "><a href="../../chapters/functions/function_keyword_arguments.html">Keyword arguments (new)</a></li><li class="chapter-item expanded "><a href="../../chapters/functions/experimental_runtime.html">Measuring runtime for functions (new)</a></li><li class="chapter-item expanded "><a href="../../chapters/functions/experimental_runtime_n.html">Measuring runtime as n changes (new)</a></li><li class="chapter-item expanded "><a href="../../chapters/functions/call_stack.html">Call stack memory diagrams (new)</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapters/lists_and_dicts/lists_and_dicts_chapter.html">Lists and Dictionaries (Review + New)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/lists_and_dicts/lists.html">Python lists (review)</a></li><li class="chapter-item expanded "><a href="../../chapters/lists_and_dicts/dictionary.html">Python dictionaries (review)</a></li><li class="chapter-item expanded "><a href="../../chapters/lists_and_dicts/list_comprehension.html">List comprehension (new)</a></li><li class="chapter-item expanded "><a href="../../chapters/lists_and_dicts/2DLists.html">Nested lists (2D lists) (review)</a></li><li class="chapter-item expanded "><a href="../../chapters/lists_and_dicts/nested_data_structures.html">Nested data structures (new)</a></li><li class="chapter-item expanded "><a href="../../chapters/lists_and_dicts/traversing_nested_lists.html">Traversing nested lists (new)</a></li><li class="chapter-item expanded "><a href="../../chapters/lists_and_dicts/nested_list_computation.html">Nested list computations (new)</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapters/classes1/classes_chapter.html">Classes, Part 1</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/classes1/classes_and_objects.html">Classes, and creating objects</a></li><li class="chapter-item expanded "><a href="../../chapters/classes1/implementing_classes.html">Implementing classes</a></li><li class="chapter-item expanded "><a href="../../chapters/classes1/print_object.html">Output of objects to the terminal</a></li><li class="chapter-item expanded "><a href="../../chapters/classes1/lists_of_objects.html">Lists of objects</a></li><li class="chapter-item expanded "><a href="../../chapters/classes1/class_composition.html">Class composition</a></li><li class="chapter-item expanded "><a href="../../chapters/classes1/class_variables.html">Class variables</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapters/classes2/classes_chapter_pt2.html">Classes, Part 2</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/classes2/comparison_dunder.html">Comparing objects (dunder part 1)</a></li><li class="chapter-item expanded "><a href="../../chapters/classes2/arithmetic_dunder.html">Arithmetic with objects (dunder part 2)</a></li><li class="chapter-item expanded "><a href="../../chapters/classes2/variables_are_references.html">Variables store references to objects</a></li><li class="chapter-item expanded "><a href="../../chapters/classes2/identity_vs_equality.html">Identity versus equality</a></li><li class="chapter-item expanded "><a href="../../chapters/classes2/memory_diagrams.html">Memory Diagrams of objects</a></li><li class="chapter-item expanded "><a href="../../chapters/classes2/shallow_v_deep_copy.html">Shallow copy vs. deep copy</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapters/inheritance/inheritance_chapter.html">Inheritance</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/inheritance/inheritance.html">Base classes and derived classes</a></li><li class="chapter-item expanded "><a href="../../chapters/inheritance/method_overriding.html">Overriding methods</a></li><li class="chapter-item expanded "><a href="../../chapters/inheritance/polymorphism.html">Polymorphism</a></li><li class="chapter-item expanded "><a href="../../chapters/inheritance/type_and_isinstance.html">Type and isinstance</a></li><li class="chapter-item expanded "><a href="../../chapters/inheritance/is_a_versus_has_a.html">Inheritance vs. composition</a></li><li class="chapter-item expanded "><a href="../../chapters/inheritance/multilevel.html">Multilevel inheritance</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapters/recursion/recursion_chapter.html">Recursion</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/recursion/recursion.html">Recursion</a></li><li class="chapter-item expanded "><a href="../../chapters/recursion/implementing_recursion.html" class="active">Implementing recursive functions</a></li><li class="chapter-item expanded "><a href="../../chapters/recursion/graphical_recursion.html">Graphical example of recursion</a></li><li class="chapter-item expanded "><a href="../../chapters/recursion/thorough_tracing.html">More examples of tracing</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapters/numpy/numpy_chapter.html">Numpy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/numpy/numpy_arrays.html">Numpy arrays</a></li><li class="chapter-item expanded "><a href="../../chapters/numpy/numpy_compute.html">Computing with numpy arrays</a></li><li class="chapter-item expanded "><a href="../../chapters/numpy/numpy_multi.html">Multi-dimensional numpy arrays</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapters/sorting/sorting_chapter.html">Sorting</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/sorting/sorting.html">Sorting - introduction</a></li><li class="chapter-item expanded "><a href="../../chapters/sorting/selection_sort.html">Selection sort</a></li><li class="chapter-item expanded "><a href="../../chapters/sorting/bubble_sort.html">Bubble sort</a></li><li class="chapter-item expanded "><a href="../../chapters/sorting/insertion_sort.html">Insertion sort</a></li><li class="chapter-item expanded "><a href="../../chapters/sorting/visualize_sorting.html">Visualizing sort algorithms</a></li></ol></li><li class="chapter-item expanded "><a href="../../chapters/files/file_chapter.html">Files and Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../chapters/files_and_data/file_open_read_close.html">Opening, closing and reading files</a></li><li class="chapter-item expanded "><a href="../../chapters/files_and_data/file_write.html">Writing to files</a></li><li class="chapter-item expanded "><a href="../../chapters/files_and_data/files_and_exceptions.html">Files and Exceptions</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Introduction to Programming 2</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="implementing-recursive-functions"><a class="header" href="#implementing-recursive-functions">Implementing recursive functions</a></h1>
<p>You can implement a recursive algorithm any time you can break a computation down into one or more parts that involve the same computation, but with smaller values. This is known as a <em>recursive relationship</em>. In addition to the recursive relationship, you also always need a <em>base case</em>, which tells you when to stop the recursion.</p>
<h2 id="example-1---computing-powers"><a class="header" href="#example-1---computing-powers">Example 1 - computing powers</a></h2>
<p>Suppose you want to write a function called <code>power()</code> that evaluates an exponential expression \(a^n\). For example, we want the line</p>
<pre><code class="language-python">print(power(2, 5))
</code></pre>
<p>to output the number 32 (since \(2^5 = 32\)). You already should know how to implement this iteratively (i.e., using a for-loop - try it for practice!). We'll now see how to implement it using recursion. Suppose we already knew the value of \(2^4\). Then it would be trivial to compute \(2^5\): since \(2^5 = 2^4*2\), we would simply multiply \(2^4\) by 2. So within the implementation of the <code>power()</code> function, when computing \(2^5\), we call the <code>power()</code> function to perform the subtask of computing \(2^4\). More generally, <code>power(a, n)</code> is just <code>power(a, n-1)*a</code>. This line of code expresses the mathematical recursive relationship \(a^n = a\cdot a^{n-1}\). Here's a partial (and flawed!) implementation that uses this idea:</p>
<pre><code class="language-python">def power(a, n):
    return power(a, n-1)*a
</code></pre>
<p>To see the flaw with the above code, imagine the call <code>power(2, 0)</code>, which should just return the value 1. Instead, it attempts to return <code>2*power(2, -1)</code>. When <code>power(2, -1)</code> is called, the expression <code>2*power(2, -2)</code> must be evaluated. In turn, to evaluate <code>power(2, -2)</code>, the the expression <code>2*power(2, -3)</code> must be computed. Notice that the exponent will continue to decrease, and we will recurse infinitely, crashing with a <code>RecursionError</code>. This demonstrates the need for a <em>base case</em>. When the exponent is 0, rather than making a recursive call, instead we should simply return the value 1. Here's code that includes the base case:</p>
<pre><code class="language-python">def power(a, n):
    # base case:
    if n == 0:
        return 1
    # recursive call:
    else:
        return power(a, n-1)*a

# main code block:
print(power(2, 5)) # correctly outputs 32
</code></pre>
<p>Other than error-checking (n must be a positive integer for this code to work), this is a correct and complete implementation. To summarize the key facts we needed to implement this function:</p>
<ul>
<li>base case: \(a^0=1\)</li>
<li>recursive relationship: \(a^n = a^{n-1} * a\)</li>
</ul>
<p>Notice how these two components appear as different cases in the code.</p>
<h2 id="example-2---computing-factorials"><a class="header" href="#example-2---computing-factorials">Example 2 - computing factorials</a></h2>
<p>Now we will implement the factorial function. Recall that the factorial of a non-negative integer n is written n!, and it is the product of all positive integers less than or equal to n. For example, \(5! = 5\cdot4\cdot3\cdot2\cdot1\). Note that 1! = 1 and 0! = 1. Finally, note that there is a relationship between a factorial value and the one before it. For example, \(5! = 5 \cdot 4!\).
As always with recursion, we start by identifying the recursive relationship, and the base case:</p>
<ul>
<li>base case: 0! = 1</li>
<li>recursive relationship: \(n! = n\cdot (n-1)!\)</li>
</ul>
<p>These two components of the recursion translate directly to two cases in the implementation:</p>
<pre><code class="language-python">def factorial(n: int):
    # base case:
    if n == 0:
        return 1
    # recursive call:
    else:
        return n*factorial(n-1)

# main code block:
print(f&quot;10! is {factorial(10):,}&quot;)
</code></pre>
<p>Output:</p>
<pre><code>10! is 3,628,800
</code></pre>
<h3 id="error-checking"><a class="header" href="#error-checking">Error-checking</a></h3>
<p>Notice that the code above does not do error-checking. Suppose we call factorial with a negative value:</p>
<pre><code class="language-python">print(f&quot;uh-oh: {factorial(-1)}&quot;)
</code></pre>
<p>By starting at a negative number, the base case is eluded, and the program crashes with the output <code>RecursionError: maximum recursion depth exceeded</code>.</p>
<p>One might blame the caller for this error: factorials should not be computed for negative numbers. However, it is good programming practice to make our implementations robust against errors by the caller. One way to fix it is to return -1 to indicate an error state if a negative number is passed to factorial:</p>
<pre><code class="language-python">def factorial(n: int):
    # check for errors:
    if n &lt; 0:
        return -1
    # base case:
    elif n == 0:
        return 1
    # recursive call:
    else:
        return n*factorial(n-1)
</code></pre>
<h2 id="example-3---computing-greatest-common-divisors"><a class="header" href="#example-3---computing-greatest-common-divisors">Example 3 - computing greatest common divisors</a></h2>
<h3 id="greatest-common-divisors-and-their-recursive-relationship"><a class="header" href="#greatest-common-divisors-and-their-recursive-relationship">Greatest common divisors and their recursive relationship</a></h3>
<p>It's common in Computer Science to need to find the greatest common divisor (gcd) of two numbers. Recall that the greatest common divisor of two integers is the largest integer that divides both numbers. For example, gcd(25, 15) = 5, and gcd(60, 72) = 12. In grade school you learned how to find the gcd of two numbers by fully factoring each, and finding the overlap of the factors. For example, \(60 = 5\cdot3\cdot2\cdot2\) and \(72 = 3\cdot3\cdot2\cdot2\cdot2\). The shared factors are \(3\cdot2\cdot2\), so gcd(60, 72) = 12. </p>
<p>However, when integers are large, factoring becomes computationally intractible, so the factoring method of finding gcds is not feasible. Fortunately, there is a theorem for reducing the problem to a smaller size. Divide the larger number by the smaller number, and find the remainder.
Then the gcd of the original two numbers is the same as the gcd of the smaller number and the remainder. For example, \(72 = 1\cdot 60 + 12\), so gcd(72, 60) = gcd(60, 12). This new problem with smaller values is easier. Since 12 goes into 60 evenly, gcd(72, 60) = gcd(60, 12) = 12. Repeatedly applying this strategy is called <em>the Euclidean algorithm</em>. We can describe this algorithm for finding gcd(a,b) (where a &gt; b) as follows:</p>
<ul>
<li>base case: if b divides a, then the answer is b. Note that b divides a if <code>a%b == 0</code></li>
<li>recursive relationship: gcd(a, b) = gcd(b, r), where r is the remainder when a is divided by b. Note that <code>r = a%b</code>.</li>
</ul>
<h3 id="implementing-the-gcd-function"><a class="header" href="#implementing-the-gcd-function">Implementing the <code>gcd()</code> function</a></h3>
<p>The recursive implementation of gcd is easy now that we have described the base case and the recursive relationship:</p>
<pre><code class="language-python">def gcd(a, b):
    # base case:
    if a%b == 0:
        return b
    # recursive call:
    else:
        return gcd(b, a%b)

# main code block:
print(gcd(60, 48)) # outputs 12
</code></pre>
<p>The above implementation is remarkable straight-forward! Note that it has some flaws that we have not checked or corrected:</p>
<ul>
<li>What if the a &lt; b?</li>
<li>What if one or both of the numbers are 0?</li>
<li>What if one or both of the numbers is negative?</li>
</ul>
<p>Completing the function to handle these errors is left to you.</p>
<h2 id="video-explanations"><a class="header" href="#video-explanations">Video explanations</a></h2>
<p><video src="https://cs.du.edu/~ftl/1352/videos/recursion/implementing_recursion.mp4" width="480" height="270" controls></video></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../chapters/recursion/recursion.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../chapters/recursion/graphical_recursion.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../chapters/recursion/recursion.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../chapters/recursion/graphical_recursion.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="../../ace.js"></script>
        <script src="../../editor.js"></script>
        <script src="../../mode-rust.js"></script>
        <script src="../../theme-dawn.js"></script>
        <script src="../../theme-tomorrow_night.js"></script>

        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../js/disable_keyboard.js"></script>


    </div>
    </body>
</html>
